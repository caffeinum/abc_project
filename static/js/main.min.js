"use strict";

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

gsap.registerPlugin(ScrollTrigger);
var parallaxImages = document.querySelectorAll('.parallax-image'); // window.addEventListener('mousemove',(e)=>{
//     parallaxImages.forEach(item =>{
//             let x= (window.innerWidth - e.pageX * 2.5) / 300
//             let y =(window.innerWidth - e.pageY * 2.5) / 300
//             item.style.left = `${x}px`
//             item.style.top = `${y}px`
//         })
//
// })

gsap.ticker.fps(140);
/*var fantasyFirstItem = document.querySelector('.fantasy-gsap-item_first');
var fantasySecondItem = document.querySelector('.fantasy-gsap-item_second');
gsap.set(fantasyFirstItem, {
  duration: 0.3,
  x: '-100%',
  y: '-100%',
  opacity: 0
});
gsap.set(fantasySecondItem, {
  duration: 0.3,
  x: "100%",
  y: '100%',
  opacity: 0
});
parallaxImages && parallaxImages.forEach(function (item) {
  item && gsap.set(item, {
    duration: 0.3,
    transformOrigin: "50% 50%",
    rotation: 4,
    opacity: 1
  });
});*/
parallaxImages && parallaxImages.forEach(function (item) {
  item && gsap.to(item, {
    duration: 0.3,
    x: 0,
    y: 0,
    rotation: 0,
    opacity: 1,
    scrollTrigger: {
      trigger: item.closest('.world-gsap-trigger'),
      start: 'top center',
      end: '+=400'
    }
  });
});

function fantasyAnimation() {
  /*gsap.to(fantasyFirstItem, {
    duration: 0.3,
    x: 0,
    y: 0,
    opacity: 1,
    scrollTrigger: {
      trigger: fantasyFirstItem.closest('.world-gsap-trigger'),
      start: 'top center',
      end: '+=400'
    }
  });
  gsap.to(fantasySecondItem, {
    duration: 0.3,
    x: 0,
    y: 0,
    opacity: 1,
    scrollTrigger: {
      trigger: fantasySecondItem.closest('.world-gsap-trigger'),
      start: 'top center',
      end: '+=400'
    }
  });*/
  parallaxImages && parallaxImages.forEach(function (item) {
    item && gsap.to(item, {
      duration: 0.3,
      x: 0,
      y: 0,
      opacity: 1,
      scrollTrigger: {
        trigger: item.closest('.world-gsap-trigger'),
        start: 'top center',
        end: '+=400'
      }
    });
  });
}

//fantasyAnimation();
window.addEventListener('resize', fantasyAnimation);

var videoPlayingForced = false;
var fantasyBlocksAnimated = false;

window.addEventListener('scroll', function () {
  if (!videoPlayingForced) {
    const videoElement = document.getElementById('top-video');
    if (videoElement.playing) {
    }
    else {
        videoElement.play();
    }
    videoPlayingForced = true;
  }

  if (!fantasyBlocksAnimated) {
    if (window.pageYOffset > 2050) {

      document.getElementsByClassName("fantasy-gsap-item_first_initial")[0].classList.remove("fantasy-gsap-item_first_initial");
      document.getElementsByClassName("fantasy-gsap-item_second_initial")[0].classList.remove("fantasy-gsap-item_second_initial");
      document.getElementsByClassName("fantasy-gsap-item_third_initial")[0].classList.remove("fantasy-gsap-item_third_initial");

      fantasyBlocksAnimated = true;
    }
  }


  parallaxImages && parallaxImages.forEach(function (item) {
    var heightFromTop = +item.getBoundingClientRect().top + window.pageYOffset;

    if (window.pageYOffset > heightFromTop - 200) {
      if (item.classList.contains('rotate_active')) return;
      item.classList.add('rotate_active');
      item.removeAttribute("style");
    }
  });
});
var footerInputs = document.querySelectorAll('.form-input');
footerInputs && footerInputs.forEach(function (item) {
  item.addEventListener('input', function () {
    console.log('123');
    var footerButton = item.closest('.form-container').querySelector('.form-button_hided');
    item.value.length > 0 ? footerButton.classList.add('form-button_hided-active') : footerButton.classList.remove('form-button_hided-active');
  });
}); // let roadmapArrayFirst = [
//     {title:'1. The Research',descr:'We are committed to self-improvement, and have begun studying the habits of the great chimps before us. Non-Chimpz Headz start minting on October 25th.',},
//     {title:'2. The Vision',descr:'We’ve adopted the winners mindset, and formed a clear vision of the primates we’re meant to be. The Headz make their appearance on November 25th.',},
//     {title:'3. The Grind ',descr:'We’ve invested in our membership to the monkeybars, and are committed to showing up every morning to sculpt our hairy bodies. Non-Chimpz Bodyzz start minting around December 1st.',},
// ]
// let roadmapArraySecond = [
//     {title:'4. The Results',descr:'We’ve achieved mastery of mind and body, and are now fully-realized apes. Non-Chimpz Bodyzz make their appearance on December 30th.',},
//     {title:'5. The Victory',descr:'We have been chosen by the apes on high for our nobility, outstandingness, and notoriety. We will compete for our spot at the pinnacle of existence in our Non-Chimpz fantasy game, released in March 2022.',},
//     {title:'6. The Victory',descr:'We have been chosen by the apes on high for our nobility, outstandingness, and notoriety. We will compete for our spot at the pinnacle of existence in our Non-Chimpz fantasy game, released in March 2022.',},
// ]

var moreButtons = document.querySelectorAll('.world-roadmap__item-button');
moreButtons && moreButtons.forEach(function (item) {
  item.addEventListener('click', function () {
    addNewItem(item);
  });
});
var scale = 0;

var addNewItem = function addNewItem(that) {
  var secondColumn = document.querySelector('.world-roadmap__items-column.second-column');
  var firstColumn = document.querySelector('.world-roadmap__items-column.first-column');

  if (that.closest(".world-roadmap__items-column.first-column")) {
    // counter++
    // let newItem = document.createElement('div')
    // newItem.classList.add('world-roadmap__item')
    // newItem.innerHTML = `<div class="world-roadmap__item-title"> ${roadmapArrayFirst[counter].title} </div>
    //                      <div class="world-roadmap__item-descr"> ${roadmapArrayFirst[counter].descr} </div>`
    // firstColumn.insertBefore(newItem,that)
    var firstColumnItems = firstColumn && firstColumn.querySelectorAll('.world-roadmap__item');

    var hidedColumnItems = _toConsumableArray(firstColumnItems).filter(function (item) {
      return !item.classList.contains('roadmap__item_visible');
    });

    hidedColumnItems[0].classList.add('roadmap__item_visible');

    if (_toConsumableArray(firstColumnItems).every(function (item) {
      return item.classList.contains('roadmap__item_visible');
    })) {
      that.remove();
      secondColumn.querySelector('.world-roadmap__item-button').classList.remove('hide');
    } // that.style.top = ''
    // if(firstColumnItems.length === roadmapArrayFirst.length){
    // that.remove()
    // counter = 0
    // secondColumn.querySelector('.world-roadmap__item-button').classList.remove('hide')
    // }

  }

  if (that.closest('.world-roadmap__items-column.second-column')) {
    scale += 33; // let newItem = document.createElement('div')
    // newItem.classList.add('world-roadmap__item')
    // newItem.innerHTML = `<div class="world-roadmap__item-title"> ${roadmapArraySecond[counter].title} </div>
    //                      <div class="world-roadmap__item-descr"> ${roadmapArraySecond[counter].descr} </div>`
    // secondColumn.insertBefore(newItem,that)
    // counter++

    var secondColumnItems = secondColumn && secondColumn.querySelectorAll('.world-roadmap__item');

    var _hidedColumnItems = _toConsumableArray(secondColumnItems).filter(function (item) {
      return !item.classList.contains('roadmap__item_visible');
    });

    _hidedColumnItems[0].classList.add('roadmap__item_visible');

    if (_toConsumableArray(secondColumnItems).every(function (item) {
      return item.classList.contains('roadmap__item_visible');
    })) {
      that.remove();
    }

    that.style.top = "".concat(scale, "%");
  }
};

var forms = document.querySelectorAll(".form-container");
forms && forms.forEach(function (item) {
  item.addEventListener('submit', function (e) {
    e.preventDefault();
    var valide = true;
    var inputs = item.querySelectorAll('.form-required');
    inputs.forEach(function (element) {
      var parent = element.closest('.form-item');

      if (element.value.trim() === '') {
        parent.classList.add('error');
        valide = false;
      } else {
        parent.classList.remove('error');
      }
    });
    var formEmail = item.querySelector('.formEmail');
    var pattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;

    if (pattern.test(formEmail.value)) {
      valide = true;
    }

    if (!pattern.test(formEmail.value)) {
      var parent = formEmail.closest('.form-item');
      parent.classList.add('error');
      valide = false;
      return;
    }

    if (valide) {
      var parent = formEmail.closest('.form-item');
      parent.classList.add('success');

    }
  });
  var inputs = item.querySelectorAll('.form-required');
  inputs.forEach(function (element) {
    element.addEventListener('input', function () {
      var parent = this.closest('.form-item');
      parent.classList.remove('error');
    });
  });
});
var typeWriterText = document.querySelector('.world-hero__left-subtitle');
new Typewriter(typeWriterText, {
  strings: 'Join us as one of the 17 777 3D NFT chimps that transcend their deplorable origins, and prove your excellence in an all-new fantasy game.',
  autoStart: true,
  delay: 100,
});
var modalSubscribeTriggers = document.querySelectorAll('.modal-subscribe__trigger');
modalSubscribeTriggers && modalSubscribeTriggers.forEach(function (item) {
  item.addEventListener('click', function (e) {
    e.preventDefault();
    var modalSubscribe = document.querySelector('.modal-subscribe');
    modalSubscribe.classList.add('modal_opened');
    document.body.classList.add('overflow');
  });
});
var closeModalButtons = document.querySelectorAll('.close__modal');
closeModalButtons && closeModalButtons.forEach(function (item) {
  item.addEventListener('click', function () {
    var modal = item.closest('.modal-container');
    modal.classList.remove('modal_opened');
    document.body.classList.remove('overflow');
  });
});
//var TermsButton = document.querySelector('.footer-content__bottom-terms');
//TermsButton && TermsButton.addEventListener('click', function (e) {
  //e.preventDefault();
  //var modalTerms = document.querySelector('.modal-terms');
  //modalTerms.classList.add('modal_opened');
  //document.body.classList.add('overflow');
//}); // // GLOBAL MENU ===================================================
// document.querySelector('.menu_click') && document.querySelector('.menu_click').addEventListener('click', () => {
//     const menuWrap = document.querySelector('.menu_wrap')
//     menuWrap.classList.toggle('menu_wrap_active')
// })





var $ = jQuery.noConflict();

$(document).ready(function () {

  $('.footer-content__bottom-terms, .show-terms').on('click', function () {
    //e.preventDefault();
    var modalTerms = document.querySelector('.modal-terms');
    modalTerms.classList.add('modal_opened');
    document.body.classList.add('overflow');
  });

  $('.module-form').on('submit', function () {


    var emailValue = $(this).find(".formEmail").val();

        setTimeout(function () {

        }, 4000);

    return false;

  })

});
